(function(b,r,h,e,a,q,t){b.extend(tribe_ev.fn,{set_form:function(a){var h=!1,m=b("body"),l=b("#tribe_events_filters_form"),f=b("#tribe-bar-form");m.addClass("tribe-reset-on");l.length&&(l.tribe_clear_form(),l.find(".ui-slider").length&&(h=!0,b("#tribe_events_filters_form .ui-slider").each(function(){var a=b(this).attr("id"),a=b("#"+a),c=a.prev(),d=c.prev(),g=a.slider("option");a.slider("values",0,g.min);a.slider("values",1,g.max);d.text(g.min+" - "+g.max);c.val("")})));f.length&&f.tribe_clear_form();
a=e.parse_string(a);b.each(a,function(a,c){if("action"!==a){var d=decodeURI(a),g="";if(1===c.length)b('[name="'+d+'"]').is('input[type="text"], input[type="hidden"]')?b('[name="'+d+'"]').val(c):b('[name="'+d+'"][value="'+c+'"]').is(":checkbox, :radio")?b('[name="'+d+'"][value="'+c+'"]').prop("checked",!0):b('[name="'+d+'"]').is("select")&&b('select[name="'+d+'"] option[value="'+c+'"]').attr("selected",!0);else for(var p=0;p<c.length;p++)g=b('[name="'+d+'"][value="'+c[p]+'"]'),g.is(":checkbox, :radio")?
g.prop("checked",!0):b('select[name="'+d+'"] option[value="'+c[p]+'"]').attr("selected",!0)}});h&&b("#tribe_events_filters_form .ui-slider").each(function(){var a=b(this).attr("id"),a=b("#"+a),c=a.prev(),d=c.val().split("-");""!==d[0]&&(c=c.prev(),a.slider("values",0,d[0]),a.slider("values",1,d[1]),c.text(d[0]+" - "+d[1]),a.slider("refresh"))});m.removeClass("tribe-reset-on")}});b(document).ready(function(){function n(){k.addClass("tribe-filters-closed").removeClass("tribe-filters-open");tribe_storage&&
tribe_storage.setItem("tribe_events_filters_wrapper","closed")}function s(){k.removeClass("tribe-filters-closed").removeClass("tribe-ajax-success").addClass("tribe-filters-open");tribe_storage&&tribe_storage.setItem("tribe_events_filters_wrapper","open")}function m(){var a=b(window).width();767>a&&(n(),b(h).on("tribe_ev_ajaxSuccess",function(){n()}));console.log(a)}function l(){if("past"===a.view||"list"===a.view||"photo"===a.view||"map"===a.view){if(a.paged=1,("past"===a.view||"list"===a.view)&&
a.filter_cats)r.cur_url=b("#tribe-events-header").attr("data-baseurl")}else if("month"===a.view)a.date=b("#tribe-events-header").attr("data-date"),r.cur_url=a.filter_cats?b("#tribe-events-header").attr("data-baseurl"):e.url_path(document.URL);else if("week"===a.view||"day"===a.view)a.date=b("#tribe-events-header").attr("data-date")}b(".tribe_events_filter_item").filter(":last").addClass("tribe_last_child");var f=b("#tribe_events_filters_form"),k=b("body");$toggle=b("#tribe_events_filters_toggle");
b("#tribe_events_filter_item_eventcategory").length&&a.category&&(a.filter_cats=!0);if(tribe_storage){var c=tribe_storage.getItem("tribe_events_filters_wrapper");null==c&&k.is(".tribe-filters-closed")&&(c="closed");c&&"closed"==c?n():c&&"open"==c&&s();b(".tribe_events_filter_item").each(function(){var a=b(this),c=a.attr("id");(c=tribe_storage.getItem(c))&&"closed"==c&&a.addClass("closed")})}b("#tribe_events_filters_wrapper").on("click","#tribe_events_filters_reset",function(a){a.preventDefault();
k.addClass("tribe-reset-on");f.tribe_clear_form();f.find(".ui-slider").length&&b("#tribe_events_filters_form .ui-slider").each(function(){var a=b(this).attr("id"),a=b("#"+a),g=a.prev(),c=g.prev(),d=a.slider("option");a.slider("values",0,d.min);a.slider("values",1,d.max);c.text(d.min+" - "+d.max);g.val("")});b(".tribe-events-filters-horizontal").length&&b(".tribe_events_filter_item").addClass("closed");f.submit();k.removeClass("tribe-reset-on")});b("#tribe_events_filters_wrapper").on("click","#tribe_events_filters_toggle",
function(a){a.preventDefault();k.is(".tribe-filters-closed")?s():n()});f.on("click","h3",function(){var a=b(this).parent(),c=a.attr("id");b(".tribe-events-filters-horizontal").length&&b(".tribe_events_filter_item").not(a).addClass("closed");a.hasClass("closed")?(a.removeClass("closed"),tribe_storage&&tribe_storage.setItem(c,"open")):(a.addClass("closed"),tribe_storage&&tribe_storage.setItem(c,"closed"))});m();b(window).resize(function(){m()});f.on("submit",function(c){"change_view"!==tribe_events_bar_action&&
(c.preventDefault(),a.popping=!1,l(),e.pre_ajax(function(){b(h).trigger("tribe_ev_runAjax")}))});if(q.live_ajax()&&q.pushstate){f.find('input[type="submit"]').remove();var d=function(){e.disable_inputs("#tribe_events_filters_form","input, select");a.popping=!1;l();"map"===a.view?q.pushstate?e.pre_ajax(function(){b(h).trigger("tribe_ev_runAjax")}):e.pre_ajax(function(){b(h).trigger("tribe_ev_reloadOldBrowser")}):e.pre_ajax(function(){b(h).trigger("tribe_ev_runAjax")})};if(b("#tribe_events_filter_item_eventcategory").length&&
a.category)b("#tribe_events_filter_item_eventcategory input, #tribe_events_filter_item_eventcategory select").on("change",function(){e.setup_ajax_timer(function(){d()})});f.on("slidechange",".ui-slider",function(){e.setup_ajax_timer(function(){d()})});f.on("change","input, select",function(){a.filter_cats&&"tribe_events_filter_item_eventcategory"===b(this).parents(".tribe_events_filter_item").attr("id")||e.setup_ajax_timer(function(){d()})})}b(h).on("tribe_ev_collectParams",function(){var b=e.serialize("#tribe_events_filters_form",
"input, select");b.length?(a.filters=!0,a.params=a.params+"&"+b,"map"!==a.view&&(a.url_params=a.url_params.length?a.url_params+"&"+b:b)):a.filters=!1});b(h).on("tribe_ev_postCollectBarParams",function(){a.filter_cats&&b("#tribe_events_filter_item_eventcategory option:selected, #tribe_events_filter_item_eventcategory input:checked").remove();var c=e.serialize("#tribe_events_filters_form","input, select");a.url_params.length&&c.length?a.url_params=a.url_params+"&"+c:c.length&&(a.url_params=c)});b("#tribe_events_filter_item_eventcategory").length&&
a.category&&(k.addClass("tribe-reset-on"),b('#tribe_events_filter_item_eventcategory option[data-slug="'+a.category+'"]').attr("selected",!0),b('#tribe_events_filter_item_eventcategory input[data-slug="'+a.category+'"]').attr("checked","checked"),k.removeClass("tribe-reset-on"));t&&debug.info("filter-scripts.js successfully loaded")})})(jQuery,tribe_ev.data,tribe_ev.events,tribe_ev.fn,tribe_ev.state,tribe_ev.tests,tribe_debug);
